@startuml Cinema Use Case - Lên Lịch Chiếu (Chi Tiết)
!theme plain
skinparam roundcorner 10
skinparam shadowing false

skinparam actor {
    BackgroundColor #FFF4E6
    BorderColor #D32F2F
    FontSize 12
}

skinparam usecase {
    BackgroundColor #E8F5E9
    BorderColor #388E3C
    FontSize 11
}

skinparam arrow {
    LineColor #D32F2F
    LineThickness 2
}

title Hệ Thống Quản Lý Rạp Chiếu Phim\nUse Case Chi Tiết: Lên Lịch Chiếu

' =====================================================
' ACTOR
' =====================================================
actor "Nhân viên\nQuản lý" as Manager

' =====================================================
' PACKAGE: Module Lên Lịch Chiếu
' =====================================================
package "Module Lên Lịch Chiếu" {
    
    ' Use case chính
    usecase "Lên lịch chiếu" as UC_ScheduleShowtime
    
    ' Các use case chi tiết (sub-use cases)
    usecase "Chọn menu quản lý lịch chiếu" as UC_SelectScheduleMenu
    usecase "Chọn thêm lịch chiếu" as UC_SelectAddShowtime
    usecase "Chọn khung giờ và ngày chiếu" as UC_SelectTimeSlot
    usecase "Tìm phòng chiếu rảnh" as UC_FindAvailableRoom
    usecase "Chọn phòng chiếu rảnh" as UC_SelectAvailableRoom
    usecase "Chọn phim từ danh sách đang chiếu" as UC_SelectMovieFromList
    usecase "Thêm phim mới" as UC_AddNewMovie
    usecase "Xác nhận lịch chiếu" as UC_ConfirmSchedule
    usecase "Hiển thị thông báo thành công" as UC_DisplaySuccessMessage
}

' =====================================================
' QUAN HỆ: Actor -> Use Case (Association)
' =====================================================
Manager --> UC_ScheduleShowtime

' =====================================================
' QUAN HỆ: Include (Use case chính includes các bước chi tiết)
' =====================================================
UC_ScheduleShowtime ..> UC_SelectScheduleMenu : <<include>>
UC_ScheduleShowtime ..> UC_SelectAddShowtime : <<include>>
UC_ScheduleShowtime ..> UC_SelectTimeSlot : <<include>>
UC_ScheduleShowtime ..> UC_FindAvailableRoom : <<include>>
UC_ScheduleShowtime ..> UC_SelectAvailableRoom : <<include>>
UC_ScheduleShowtime ..> UC_SelectMovieFromList : <<include>>
UC_ScheduleShowtime ..> UC_ConfirmSchedule : <<include>>
UC_ScheduleShowtime ..> UC_DisplaySuccessMessage : <<include>>

' =====================================================
' QUAN HỆ: Extend (Thêm phim mới có thể được extend từ chọn phim)
' =====================================================
UC_AddNewMovie ..> UC_SelectMovieFromList : <<extend>>

' =====================================================
' GHI CHÚ VÀ MÔ TẢ LUỒNG
' =====================================================

note right of UC_ScheduleShowtime
    <b>Use Case Chính:</b> Lên lịch chiếu
    
    <b>Mô tả:</b> Nhân viên quản lý có thể
    tạo lịch chiếu mới cho các bộ phim
    tại các phòng chiếu trong rạp.
    
    <b>Luồng thực hiện:</b>
    1. Chọn menu quản lý lịch chiếu
    2. Chọn thêm lịch chiếu
    3. Chọn khung giờ và ngày chiếu
    4. Tìm và chọn phòng chiếu còn rảnh
    5. Chọn phim từ danh sách đang chiếu
       (thêm mới nếu chưa có)
    6. Xác nhận
    7. Hệ thống báo thành công
end note

note right of UC_SelectScheduleMenu
    <b>Bước 1:</b> Chọn menu quản lý lịch chiếu
    từ giao diện quản lý.
end note

note right of UC_SelectAddShowtime
    <b>Bước 2:</b> Chọn chức năng thêm lịch chiếu
    từ danh sách các tùy chọn quản lý.
end note

note right of UC_SelectTimeSlot
    <b>Bước 3:</b> Chọn khung giờ và ngày chiếu
    cho suất chiếu mới.
    Bao gồm:
    - Ngày chiếu
    - Giờ bắt đầu
    - Giờ kết thúc
end note

note right of UC_FindAvailableRoom
    <b>Bước 4:</b> Hệ thống tìm kiếm các phòng
    chiếu còn rảnh trong khung giờ đã chọn.
    Kiểm tra xung đột với các lịch chiếu
    đã có sẵn.
end note

note right of UC_SelectAvailableRoom
    <b>Bước 5:</b> Nhân viên chọn một phòng chiếu
    từ danh sách các phòng còn rảnh.
    Thông tin phòng bao gồm:
    - Tên phòng
    - Sức chứa
    - Định dạng (2D/3D/IMAX)
end note

note right of UC_SelectMovieFromList
    <b>Bước 6:</b> Chọn phim từ danh sách các phim
    đang chiếu trong hệ thống.
    Nếu phim chưa có trong danh sách,
    có thể thêm phim mới.
end note

note right of UC_AddNewMovie
    <b>Bước 6a (Tùy chọn):</b> Nếu phim chưa có
    trong danh sách đang chiếu, nhân viên
    có thể thêm phim mới vào hệ thống.
    Sau đó quay lại bước chọn phim.
end note

note right of UC_ConfirmSchedule
    <b>Bước 7:</b> Xác nhận thông tin lịch chiếu
    đã nhập và gửi yêu cầu tạo lịch chiếu
    đến hệ thống.
    Hệ thống sẽ kiểm tra:
    - Phòng có còn rảnh không
    - Thời gian có hợp lệ không
    - Phim có đang chiếu không
end note

note right of UC_DisplaySuccessMessage
    <b>Bước 8:</b> Hệ thống hiển thị thông báo
    thành công sau khi tạo lịch chiếu.
    Thông báo bao gồm:
    - Mã lịch chiếu
    - Thông tin phim
    - Thông tin phòng
    - Thời gian chiếu
end note

note bottom of Manager
    <b>Nhân viên Quản lý</b> sử dụng chức năng này
    để tạo và quản lý lịch chiếu cho các
    bộ phim tại rạp.
end note

note bottom of UC_AddNewMovie
    <b>Lưu ý:</b> Use case này là tùy chọn,
    chỉ được thực hiện khi phim chưa có
    trong danh sách đang chiếu.
end note

@enduml

